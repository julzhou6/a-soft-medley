---
// component imports
import MainLayout from "../../layouts/MainLayout.astro";
import PreviewPost from "../../layouts/PreviewPost.astro";
import { fetchAPI } from "../../lib/api";

const data = await fetchAPI("posts?_embed");
---

<MainLayout title="My Blog">
  <article class="container post">
    <h1>My Blog</h1>
    <div>
      <ul>
        {
          data.map((post: any) => {
            return (
              <li>
                <PreviewPost post={post} />
              </li>
            );
          })
        }
      </ul>
    </div>
  </article>
</MainLayout>
<script define:vars={{ data }}>
  console.log(data);
</script>
<style>
  li {
    list-style-type: none;
  }
  ul {
    padding-left: 0 !important;
  }
</style>
