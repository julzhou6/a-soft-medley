---
// component imports
import MainLayout from "../../layouts/MainLayout.astro";
import PreviewPost from "../../layouts/PreviewPost.astro";
import { fetchAPI } from "../../lib/api";

const data = await fetchAPI("posts?_embed");
---

<MainLayout title="Blog">
  <article class="container">
    <h1 class="heading">BLOG</h1>
    <div class="post-list">
      <ul>
        {
          data.map((post: any) => {
            return (
              <li id="post">
                <PreviewPost post={post} />
              </li>
            );
          })
        }
      </ul>
    </div>
  </article>
</MainLayout>
<!-- <script define:vars={{ data }}>
  console.log(data);
</script> -->
<style>
  h1 {
    text-align: center;
  }
  li {
    list-style-type: none;
    padding-bottom: 1rem;
  }
  @media screen and (max-width: 640px) {
    li {
      padding-bottom: 2rem;
    }
    .heading {
      font-size: 40px;
    }
  }
  ul {
    padding-left: 0 !important;
  }
  .post-list {
    max-width: 80%;
    margin: auto;
  }
</style>
<!-- <script>
   import { gsap } from "gsap";
    var t1 = gsap.timeline();
    t1.from("#post", {opacity: 0, autoAlpha: 0})
</script> -->
